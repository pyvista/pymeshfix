
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/repair_planar.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_repair_planar.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_repair_planar.py:


Partial Fill Holes
------------------

This example fills all but the largest holes in a planar mesh using the lower level pymeshfix interface :class:`pymeshfix.PyTMesh`.

.. GENERATED FROM PYTHON SOURCE LINES 7-16

.. code-block:: Python


    # sphinx_gallery_thumbnail_number = 1
    import numpy as np
    import pyvista as pv
    from pymeshfix import PyTMesh

    from pymeshfix import MeshFix
    from pymeshfix import examples








.. GENERATED FROM PYTHON SOURCE LINES 17-18

Plot the holes on the original mesh

.. GENERATED FROM PYTHON SOURCE LINES 18-33

.. code-block:: Python


    orig_mesh = pv.read(examples.planar_mesh)
    # orig_mesh.plot_boundaries()

    meshfix = MeshFix(orig_mesh, verbose=True)
    holes = meshfix.extract_holes()

    # Render the mesh and outline the holes
    pl = pv.Plotter()
    pl.add_mesh(orig_mesh, color=True, smooth_shading=True)
    pl.add_mesh(holes, color="r", line_width=8, render_lines_as_tubes=True, lighting=False)
    pl.enable_eye_dome_lighting()  # helps depth perception
    _ = pl.show()





.. image-sg:: /examples/images/sphx_glr_repair_planar_001.png
   :alt: repair planar
   :srcset: /examples/images/sphx_glr_repair_planar_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 34-35

This example uses the lower level C interface to the TMesh object.

.. GENERATED FROM PYTHON SOURCE LINES 35-45

.. code-block:: Python

    mfix = PyTMesh()
    mfix.set_quiet(True)
    mfix.load_file(examples.planar_mesh)

    # Fills all the holes having at at most 'nbe' boundary edges. If
    # 'refine' is true, adds inner vertices to reproduce the sampling
    # density of the surroundings. Returns number of holes patched. If
    # 'nbe' is 0 (default), all the holes are patched.
    mfix.fill_small_boundaries(nbe=100, refine=True)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    16



.. GENERATED FROM PYTHON SOURCE LINES 46-47

Convert back to a pyvista mesh

.. GENERATED FROM PYTHON SOURCE LINES 47-50

.. code-block:: Python

    vert, faces = mfix.return_arrays()
    mesh = pv.make_tri_mesh(vert, faces)








.. GENERATED FROM PYTHON SOURCE LINES 51-57

Plot the repaired mesh along with the original holes.

.. note::
   It seems there is a limit to the repair algorithm whereby some of the
   holes that include only a single point are not filled. These boundary
   holes are not detected by VTK's hole repair algorithm either.

.. GENERATED FROM PYTHON SOURCE LINES 57-63

.. code-block:: Python


    pl = pv.Plotter()
    pl.add_mesh(mesh, color=True, smooth_shading=True)
    pl.add_mesh(holes, color="r", line_width=8, render_lines_as_tubes=True, lighting=False)
    pl.enable_eye_dome_lighting()  # helps depth perception
    _ = pl.show()



.. image-sg:: /examples/images/sphx_glr_repair_planar_002.png
   :alt: repair planar
   :srcset: /examples/images/sphx_glr_repair_planar_002.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.788 seconds)


.. _sphx_glr_download_examples_repair_planar.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: repair_planar.ipynb <repair_planar.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: repair_planar.py <repair_planar.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: repair_planar.zip <repair_planar.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
